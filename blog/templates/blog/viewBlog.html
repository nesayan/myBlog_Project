{% extends 'blog/base.html'%}

{%block title%} View blog {%endblock%}

{% block body %}

    {% if user.is_authenticated %}
    <p class= "mt-3">This is the view blog page of {{user.username}}</p>
    {% endif %}

    <div class="border border-light bg-light py-3 px-1 mb-3">
        <strong class= "h4">{{blog.title}}</strong>
        <h5 class="font-weight-light mt-2"> {{blog.description|linebreaksbr}}</h5>
        <h6 class="font-weight-light mt-2"> By: {{blog.user}} </h6>
    </div>


    <!-- Default edit blog post form -->
    {% if user.is_authenticated and user == blog.user %}

    <form action="{% url 'deleteBlog' blog.pk %}" method="POST">
        {% csrf_token %}
        <button class="btn btn-danger btn-block my-4 col-md-2" type="submit">Delete blog</button>
    </form>
    
    <h3 class='font-weight-lighter mb-5'>Edit your blog here</h3>
    <form method="POST">
        {% csrf_token %}

        <!-- Title -->
        <div class="form-group row">
            <label for="title" class="col-sm-2 col-form-label">Title</label>
            <div class="col-sm-10">
                <input type="text" name= "title" value= "{{blog.title}}" class="form-control" id="title" placeholder="Title" required>
            </div>
        </div>
        <div class="form-group row my-4">
            <label for="desc" class= "col-md-2 col-form-label">Description</label>
            <div class="col-sm-10">
                <textarea name= "description" class="form-control" id="desc" rows="3" placeholder= "Description">{{blog.description}}</textarea>
            </div>
        </div>

        <!-- Edit button -->
        <button class="btn btn-info btn-block my-4 col-md-2 offset-md-5" type="submit">Edit blog</button>

    </form>

    {% endif %}
    <!-- Default edit blog post form -->
    
{% endblock %}